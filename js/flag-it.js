function isEmpty(a){return 0==a.length}$(".flag-it").click(function(a){a.preventDefault();var b=$(this),c=(b.parent(),b.parents(".comment")),d=new Modal($("#"+b.data("modal-id"))),e=d.element.find("form"),f=e.attr("action");b.toggleClass("selected"),c.toggleClass("to-flag");var g={};g[409]=function(){errorPopup(Messages.get("error.cant_do"),d.element,"center-popup")},g[400]=function(){errorPopup(Messages.get("hint.choose_an_option"),d.element,"center-popup")},g[403]=function(){errorPopup(Messages.get("auth.requires_login"),d.element,"center-popup")},g[200]=function(){d.hide(200),b.remove()};var h=e.find(".error");e.change(function(){h.text("")}),e.submit(function(a){a.preventDefault();var b=e.find("input:radio:checked");return isEmpty(b)?void h.text(Messages.get("hint.choose_a_reason")).show():(reason=e.find("textarea"),"OTHER"==b.val()&&isEmpty(reason.val())?void h.text(Messages.get("hint.describe_reason")).show():void $.ajax(f,{complete:function(a){void 0!=g[a.status]?g[a.status].call():(errorPopup(Messages.get("error.occured"),d,"center-popup"),console.log(a))},data:e.serialize(),headers:{Accept:"application/json"},method:"POST"}))})}),$(".other-option").change(function(){var a=$(this);a.siblings("#other-reason").show(200)}),$(".modal input:not(.other-option)").change(function(){$(".modal #other-reason").hide()});