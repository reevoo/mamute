function vote(a){var b=a.data("value"),c=a.data("type"),d=a.data("id"),e="/"+c+"/"+d+"/voto/"+b;fakeUpdateIncrement(a,b),$.ajax(""+e,{complete:function(b){if("200"==b.status){var c=b.responseText;voteSuccess(a,c)}else"409"==b.status?errorPopup(Messages.get("vote.ownquestion"),a):"403"==b.status?errorPopup(b.responseText,a):(errorPopup(Messages.get("error.occured"),a),console.log(b));$(".vote-option").removeClass("stop")},accepts:"application/json",method:"POST"})}function removeVote(a){var b=a.data("value"),c=a.data("type"),d=a.data("id"),e="/"+c+"/"+d+"/voto/remove/"+b;fakeUpdateDecrement(a,b),$.ajax(""+e,{complete:function(b){if("200"==b.status){var c=b.responseText;voteRemovalSuccess(a,c)}else"409"==b.status?errorPopup(Messages.get("vote.ownquestion"),a):"403"==b.status?errorPopup(b.responseText,a):(errorPopup(Messages.get("error.occured"),a),console.log(b));$(".vote-option").removeClass("stop")},accepts:"application/json",method:"POST"})}function highlight(a){a.addClass("voted").siblings().removeClass("voted")}function removeHighlight(a){a.removeClass("voted").siblings().removeClass("voted")}function updateCount(a,b){var c=$(a).closest(".vote-container").find(".vote-count");c.text(b)}function fakeUpdateIncrement(a,b){var c,d=parseInt($(a).closest(".vote-container").find(".vote-count").html());c="positivo"==b?d+1:d-1,voteSuccess(a,c)}function fakeUpdateDecrement(a,b){var c,d=parseInt($(a).closest(".vote-container").find(".vote-count").html());c="positivo"==b?d-1:d+1,voteRemovalSuccess(a,c)}function voteSuccess(a,b){highlight(a),updateCount(a,b)}function voteRemovalSuccess(a,b){removeHighlight(a),updateCount(a,b)}$(".vote-option").bind("click",function(){$(this).hasClass("stop")||($(this).hasClass("voted")?$(this).hasClass("voted")&&($(this).addClass("stop"),removeVote($(this))):($(this).addClass("stop"),vote($(this))))});